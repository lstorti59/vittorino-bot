function observeMessages() {
  const dfMessenger = document.querySelector('df-messenger');
  if (dfMessenger) {
    // Accedi allo shadowRoot del df-messenger
    const shadowRoot = dfMessenger.shadowRoot;
    if (shadowRoot) {
      const messageList = shadowRoot.querySelector('#messageList');
      if (messageList) {
        const observer = new MutationObserver((mutations) => {
          mutations.forEach((mutation) => {
            mutation.addedNodes.forEach((node) => {
              if (node.nodeType === Node.ELEMENT_NODE) {
                const botMessages = node.shadowRoot?.querySelectorAll('.message.bot-message');
                if (botMessages) {
                  botMessages.forEach(messageNode => {
                    const botMessageText = messageNode.textContent.trim();
                    if (botMessageText) {
                      console.log('Messaggio del bot rilevato:', botMessageText);
                      speakText(botMessageText);  // Attiva il TTS
                    }
                  });
                }
              }
            });
          });
        });

        observer.observe(messageList, { childList: true, subtree: true });
        console.log("Osservatore attivato per i messaggi nel shadowRoot.");
      } else {
        console.error("messageList non trovato nel shadowRoot.");
      }
    } else {
      console.error("shadowRoot non trovato.");
    }
  } else {
    console.error("df-messenger non trovato.");
  }
}
